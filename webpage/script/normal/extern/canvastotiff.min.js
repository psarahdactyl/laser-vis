/*
	canvas-to-tiff 1.6.1
	(c) epistemex.com 2015-2016
	MIT License
*/
"use strict";var CanvasToTIFF={_dly:7,toArrayBuffer:function(c,a,t){t=t||{};var q=this,x=c.width,l=c.height,u=0,r=0,o=258,j=0,s=[],n,v="canvas-to-tiff 1.6\0",p=!!t.littleEndian,g=+(t.dpiX||t.dpi||96)|0,i=+(t.dpiY||t.dpi||96)|0,b=typeof ezlib!=="undefined"&&typeof ezlib.Deflate!=="undefined",d=typeof t.compressionLevel==="number"?Math.max(0,Math.min(9,t.compressionLevel)):6,f,m;f=c.getContext("2d");if(!f){f=document.createElement("canvas").getContext("2d");if(f){f.canvas.width=x;f.canvas.height=l;f.drawImage(c,0,0)}else{if(t.onError){t.onError({msg:"Cannot obtain a 2D context."})}else{console.log(e)}}}m=(function(h){try{return h.getImageData(0,0,x,l)}catch(w){if(t.onError){t.onError(w)}}})(f);if(b&&(typeof t.compress==="boolean"?t.compress:!0)){ezlib.deflateAsync(m.data,{level:d},function(h){k(h.result)},function(h){if(t.onError){t.onError(h)}})}else{k()}function k(F){var E=F?F.length:m.data.length,B=o+E,z=new ArrayBuffer(B),A=new Uint8Array(z),J=new DataView(z);G(p?18761:19789);G(42);H(8);w();h(254,4,1,0);h(256,4,1,x);h(257,4,1,l);h(258,3,4,r,8);h(259,3,1,F?8:1);h(262,3,1,2);h(273,4,1,o,0);h(277,3,1,4);h(279,4,1,E);h(282,5,1,r,8);h(283,5,1,r,8);h(296,3,1,2);h(305,2,v.length,r,D(v));h(306,2,20,r,20);h(338,3,1,2);y();H(524296);H(524296);H(g);H(1);H(i);H(1);I(v);I(C());A.set(F?F:m.data,o);setTimeout(function(){a(z)},q._dly);function C(){var K=new Date();return K.getFullYear()+":"+L(K.getMonth()+1)+":"+L(K.getDate())+" "+L(K.getHours())+":"+L(K.getMinutes())+":"+L(K.getSeconds());function L(M){return M<10?"0"+M:M}}function G(K){J.setUint16(u,K,p);u+=2}function H(K){J.setUint32(u,K,p);u+=4}function I(L){var K=0;while(K<L.length){J.setUint8(u++,L.charCodeAt(K++)&255)}if(u&1){u++}}function D(L){var K=L.length;return K&1?K+1:K}function h(M,N,K,O,L){G(M);G(N);H(K);if(L){r+=L;s.push(u)}if(K===1&&N===3&&!L){G(O);G(0)}else{H(O)}j++}function w(K){n=K||u;u+=2}function y(){J.setUint16(n,j,p);H(0);var K=14+j*12;for(var L=0,N,M;L<s.length;L++){N=s[L];M=J.getUint32(N,p);J.setUint32(N,M+K,p)}}}},toBlob:function(b,a,c){this.toArrayBuffer(b,function(d){a(new Blob([d],{type:"image/tiff"}))},c)},toObjectURL:function(b,a,c){this.toBlob(b,function(d){a((window.URL||window.webkitURL).createObjectURL(d))},c)},toDataURL:function(b,a,c){this.toBlob(b,function(d){var f=new FileReader();f.onload=function(){a(f.result)};f.onerror=function(){if(c&&c.onError){c.onError({msg:"Error converting data to Data-URI."})}};f.readAsDataURL(d)},c)}};"use strict";var ezlib=ezlib||{_async:function(f,e,a,b,j){j=j||{};var h=j.lapTime||200,g=j.delay||9,k=0,c,d,l,m;if(e){d=new ezlib.Deflate(j);c=j.asyncBlock||1<<18}else{d=new ezlib.Inflate(j);c=j.asyncBlock||1<<19}l=performance.now();(function i(){var o=f.subarray(k,k+c);k+=c;var n=k>=f.length;d.push(o,n);if(n){setTimeout(function(p){if(p.err){if(b){b({msg:p.msg})}}else{a({result:p.result})}},g,d)}else{m=performance.now();if(m-l>=h){l=m;if(j.progress){j.progress({progress:k/f.length})}setTimeout(i,g)}else{i()}}})()}};ezlib.deflateAsync=function(c,d,b,a){ezlib._async(c,!0,b,a,d)};(function(){var e=0;var d=4;var f=0;var g=1;var h=2;var a=-1;var b=0;var c=8;ezlib.Deflate=function(j){this.options=ezlib.utils.assign({level:a,method:c,chunkSize:16384,windowBits:15,memLevel:8,strategy:b},j||{});var i=this.options;if(i.raw&&(i.windowBits>0)){i.windowBits=-i.windowBits}else{if(i.gzip&&(i.windowBits>0)&&(i.windowBits<16)){i.windowBits+=16}}this.result;this.err=0;this.msg="";this.ended=!1;this.onend=null;this.onerror=null;this.chunks=[];this.strm=new ezlib.ZStream();this.strm.avail_out=0;var k=ezlib.zlib_deflate.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(k!==f){throw new Error(ezlib.msg[k])}if(i.header){ezlib.zlib_deflate.deflateSetHeader(this.strm,i.header)}if(i.dictionary){k=ezlib.zlib_deflate.deflateSetDictionary(this.strm,i.dictionary);if(k!==f){throw new Error(ezlib.msg[k])}}};ezlib.Deflate.prototype={push:function(k,m,l){var o=this.strm;var j=this.options.chunkSize;var n,i;if(this.ended){return !1}i=(m===~~m)?m:((m===!0)?d:e);if(typeof k==="string"){o.input=new TextEncoder(l?"utf8":"utf-16le").encode(k)}else{o.input=k}o.next_in=0;o.avail_in=o.input.length;do{if(o.avail_out===0){o.output=new Uint8Array(j);o.next_out=0;o.avail_out=j}n=ezlib.zlib_deflate.deflate(o,i);if(n!==g&&n!==f){this.onEnd(n);this.ended=!0;return !1}if(o.avail_out===0||(o.avail_in===0&&(i===d||i===h))){this.onData(ezlib.utils.shrinkBuf(o.output,o.next_out))}}while((o.avail_in>0||o.avail_out===0)&&n!==g);if(i===d){n=ezlib.zlib_deflate.deflateEnd(this.strm);this.onEnd(n);this.ended=!0;return n===f}if(i===h){this.onEnd(f);o.avail_out=0}return !0},onData:function(i){this.chunks.push(i)},onEnd:function(i){if(i===f){this.result=ezlib.utils.flattenChunks(this.chunks);if(this.onend){setTimeout(function(j){j.onend(j.result)},5,this)}}else{if(this.onerror){setTimeout(function(j){j.onerror({status:i,msg:j.strm.msg})},5,this)}}this.chunks=[];this.err=i;this.msg=this.strm.msg}}})();ezlib.utils=ezlib.utils||{assign:function(b){var d=Array.prototype.slice.call(arguments,1);while(d.length){var c=d.shift();if(!c){continue}var a=Object.keys(c);a.forEach(function(e){if(c.hasOwnProperty(e)){b[e]=c[e]}})}return b},arraySet:function(a,d,e,c,b){a.set(d.subarray(e,e+c),b)},flattenChunks:function(b){var c,d,e,f,a,g;e=0;for(c=0,d=b.length;c<d;c++){e+=b[c].length}g=new Uint8Array(e);f=0;for(c=0,d=b.length;c<d;c++){a=b[c];g.set(a,f);f+=a.length}return g},shrinkBuf:function(a,b){if(a.length===b){return a}if(a.subarray){return a.subarray(0,b)}a.length=b;return a}};ezlib.msg=ezlib.msg||{2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};ezlib.adler32=ezlib.adler32||function(a,b,c,e){var f=(a&65535)|0,g=((a>>>16)&65535)|0,d=0;while(c!==0){d=c>2000?2000:c;c-=d;do{f=(f+b[e++])|0;g=(g+f)|0}while(--d);f%=65521;g%=65521}return(f|(g<<16))|0};ezlib.crc32=ezlib.crc32||(function(){var b=c();function c(){var d,g=[];for(var f=0;f<256;f++){d=f;for(var e=0;e<8;e++){d=((d&1)?(3988292384^(d>>>1)):(d>>>1))}g[f]=d}return g}function a(e,d,h,j){var k=b,f=j+h;e^=-1;for(var g=j;g<f;g++){e=(e>>>8)^k[(e^d[g])&255]}return(e^(-1))}return a})();ezlib.zlib_deflate=(function(){var al=0;var an=1;var aj=3;var ah=4;var aa=5;var am=0;var ap=1;var aq=-2;var ac=-3;var ab=-5;var ad=-1;var ag=1;var ak=2;var ao=3;var ai=4;var ae=0;var af=8;var ar=2;var O=9;var P=15;var k=8;var J=29;var K=256;var I=K+1+J;var j=30;var a=19;var G=2*I+1;var M=15;var R=3;var N=258;var Q=(N+R+1);var U=32;var H=42;var A=69;var S=73;var g=91;var F=103;var f=113;var C=777;var e=1;var b=2;var d=3;var c=4;var T=3;function z(av,au){av.msg=msg[au];return au}function X(au){return((au)<<1)-((au)>4?9:0)}function at(au){var av=au.length;while(--av>=0){au[av]=0}}function E(aw){var av=aw.state;var au=av.pending;if(au>aw.avail_out){au=aw.avail_out}if(au===0){return}ezlib.utils.arraySet(aw.output,av.pending_buf,av.pending_out,au,aw.next_out);aw.next_out+=au;av.pending_out+=au;aw.total_out+=au;aw.avail_out-=au;av.pending-=au;if(av.pending===0){av.pending_out=0}}function D(av,au){ezlib.trees._tr_flush_block(av,(av.block_start>=0?av.block_start:-1),av.strstart-av.block_start,au);av.block_start=av.strstart;E(av.strm)}function V(av,au){av.pending_buf[av.pending++]=au}function W(av,au){av.pending_buf[av.pending++]=(au>>>8)&255;av.pending_buf[av.pending++]=au&255}function Y(ay,au,ax,aw){var av=ay.avail_in;if(av>aw){av=aw}if(av===0){return 0}ay.avail_in-=av;ezlib.utils.arraySet(au,ay.input,ay.next_in,av,ax);if(ay.state.wrap===1){ay.adler=ezlib.adler32(ay.adler,au,av,ax)}else{if(ay.state.wrap===2){ay.adler=ezlib.crc32(ay.adler,au,av,ax)}}ay.next_in+=av;ay.total_in+=av;return av}function Z(aD,ax){var aw=aD.max_chain_length;var aE=aD.strstart;var aA;var ay;var av=aD.prev_length;var aB=aD.nice_match;var az=(aD.strstart>(aD.w_size-Q))?aD.strstart-(aD.w_size-Q):0;var au=aD.window;var aI=aD.w_mask;var aC=aD.prev;var aH=aD.strstart+N;var aG=au[aE+av-1];var aF=au[aE+av];if(aD.prev_length>=aD.good_match){aw>>=2}if(aB>aD.lookahead){aB=aD.lookahead}do{aA=ax;if(au[aA+av]!==aF||au[aA+av-1]!==aG||au[aA]!==au[aE]||au[++aA]!==au[aE+1]){continue}aE+=2;aA++;do{}while(au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&au[++aE]===au[++aA]&&aE<aH);ay=N-(aH-aE);aE=aH-N;if(ay>av){aD.match_start=ax;av=ay;if(ay>=aB){break}aG=au[aE+av-1];aF=au[aE+av]}}while((ax=aC[ax&aI])>az&&--aw!==0);if(av<=aD.lookahead){return av}return aD.lookahead}function B(az){var au=az.w_size;var ay,ax,av,aw,aA;do{aw=az.window_size-az.lookahead-az.strstart;if(az.strstart>=au+(au-Q)){ezlib.utils.arraySet(az.window,az.window,au,au,0);az.match_start-=au;az.strstart-=au;az.block_start-=au;ax=az.hash_size;ay=ax;do{av=az.head[--ay];az.head[ay]=(av>=au?av-au:0)}while(--ax);ax=au;ay=ax;do{av=az.prev[--ay];az.prev[ay]=(av>=au?av-au:0)}while(--ax);aw+=au}if(az.strm.avail_in===0){break}ax=Y(az.strm,az.window,az.strstart+az.lookahead,aw);az.lookahead+=ax;if(az.lookahead+az.insert>=R){aA=az.strstart-az.insert;az.ins_h=az.window[aA];az.ins_h=((az.ins_h<<az.hash_shift)^az.window[aA+1])&az.hash_mask;while(az.insert){az.ins_h=((az.ins_h<<az.hash_shift)^az.window[aA+R-1])&az.hash_mask;az.prev[aA&az.w_mask]=az.head[az.ins_h];az.head[az.ins_h]=aA;aA++;az.insert--;if(az.lookahead+az.insert<R){break}}}}while(az.lookahead<Q&&az.strm.avail_in!==0)}function q(ax,au){var av=65535;if(av>ax.pending_buf_size-5){av=ax.pending_buf_size-5}for(;;){if(ax.lookahead<=1){B(ax);if(ax.lookahead===0&&au===al){return e}if(ax.lookahead===0){break}}ax.strstart+=ax.lookahead;ax.lookahead=0;var aw=ax.block_start+av;if(ax.strstart===0||ax.strstart>=aw){ax.lookahead=ax.strstart-aw;ax.strstart=aw;D(ax,!1);if(ax.strm.avail_out===0){return e}}if(ax.strstart-ax.block_start>=(ax.w_size-Q)){D(ax,!1);if(ax.strm.avail_out===0){return e}}}ax.insert=0;if(au===ah){D(ax,!0);if(ax.strm.avail_out===0){return d}return c}if(ax.strstart>ax.block_start){D(ax,!1);if(ax.strm.avail_out===0){return e}}return e}function m(ay,aw){var ax;var av;var au=ezlib.trees;for(;;){if(ay.lookahead<Q){B(ay);if(ay.lookahead<Q&&aw===al){return e}if(ay.lookahead===0){break}}ax=0;if(ay.lookahead>=R){ay.ins_h=((ay.ins_h<<ay.hash_shift)^ay.window[ay.strstart+R-1])&ay.hash_mask;ax=ay.prev[ay.strstart&ay.w_mask]=ay.head[ay.ins_h];ay.head[ay.ins_h]=ay.strstart}if(ax!==0&&((ay.strstart-ax)<=(ay.w_size-Q))){ay.match_length=Z(ay,ax)}if(ay.match_length>=R){av=au._tr_tally(ay,ay.strstart-ay.match_start,ay.match_length-R);ay.lookahead-=ay.match_length;if(ay.match_length<=ay.max_lazy_match&&ay.lookahead>=R){ay.match_length--;do{ay.strstart++;ay.ins_h=((ay.ins_h<<ay.hash_shift)^ay.window[ay.strstart+R-1])&ay.hash_mask;ax=ay.prev[ay.strstart&ay.w_mask]=ay.head[ay.ins_h];ay.head[ay.ins_h]=ay.strstart}while(--ay.match_length!==0);ay.strstart++}else{ay.strstart+=ay.match_length;ay.match_length=0;ay.ins_h=ay.window[ay.strstart];ay.ins_h=((ay.ins_h<<ay.hash_shift)^ay.window[ay.strstart+1])&ay.hash_mask}}else{av=au._tr_tally(ay,0,ay.window[ay.strstart]);ay.lookahead--;ay.strstart++}if(av){D(ay,!1);if(ay.strm.avail_out===0){return e}}}ay.insert=((ay.strstart<(R-1))?ay.strstart:R-1);if(aw===ah){D(ay,!0);if(ay.strm.avail_out===0){return d}return c}if(ay.last_lit){D(ay,!1);if(ay.strm.avail_out===0){return e}}return b}function p(az,aw){var ax;var av;var ay;var au=ezlib.trees;for(;;){if(az.lookahead<Q){B(az);if(az.lookahead<Q&&aw===al){return e}if(az.lookahead===0){break}}ax=0;if(az.lookahead>=R){az.ins_h=((az.ins_h<<az.hash_shift)^az.window[az.strstart+R-1])&az.hash_mask;ax=az.prev[az.strstart&az.w_mask]=az.head[az.ins_h];az.head[az.ins_h]=az.strstart}az.prev_length=az.match_length;az.prev_match=az.match_start;az.match_length=R-1;if(ax!==0&&az.prev_length<az.max_lazy_match&&az.strstart-ax<=(az.w_size-Q)){az.match_length=Z(az,ax);if(az.match_length<=5&&(az.strategy===ag||(az.match_length===R&&az.strstart-az.match_start>4096))){az.match_length=R-1}}if(az.prev_length>=R&&az.match_length<=az.prev_length){ay=az.strstart+az.lookahead-R;av=au._tr_tally(az,az.strstart-1-az.prev_match,az.prev_length-R);az.lookahead-=az.prev_length-1;az.prev_length-=2;do{if(++az.strstart<=ay){az.ins_h=((az.ins_h<<az.hash_shift)^az.window[az.strstart+R-1])&az.hash_mask;ax=az.prev[az.strstart&az.w_mask]=az.head[az.ins_h];az.head[az.ins_h]=az.strstart}}while(--az.prev_length!==0);az.match_available=0;az.match_length=R-1;az.strstart++;if(av){D(az,!1);if(az.strm.avail_out===0){return e}}}else{if(az.match_available){av=au._tr_tally(az,0,az.window[az.strstart-1]);if(av){D(az,!1)}az.strstart++;az.lookahead--;if(az.strm.avail_out===0){return e}}else{az.match_available=1;az.strstart++;az.lookahead--}}}if(az.match_available){av=au._tr_tally(az,0,az.window[az.strstart-1]);az.match_available=0}az.insert=az.strstart<R-1?az.strstart:R-1;if(aw===ah){D(az,!0);if(az.strm.avail_out===0){return d}return c}if(az.last_lit){D(az,!1);if(az.strm.avail_out===0){return e}}return b}function o(az,ax){var aw;var ay;var aA,aB;var av=az.window;var au=ezlib.trees;for(;;){if(az.lookahead<=N){B(az);if(az.lookahead<=N&&ax===al){return e}if(az.lookahead===0){break}}az.match_length=0;if(az.lookahead>=R&&az.strstart>0){aA=az.strstart-1;ay=av[aA];if(ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]){aB=az.strstart+N;do{}while(ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]&&ay===av[++aA]&&aA<aB);az.match_length=N-(aB-aA);if(az.match_length>az.lookahead){az.match_length=az.lookahead}}}if(az.match_length>=R){aw=au._tr_tally(az,1,az.match_length-R);az.lookahead-=az.match_length;az.strstart+=az.match_length;az.match_length=0}else{aw=au._tr_tally(az,0,az.window[az.strstart]);az.lookahead--;az.strstart++}if(aw){D(az,!1);if(az.strm.avail_out===0){return e}}}az.insert=0;if(ax===ah){D(az,!0);if(az.strm.avail_out===0){return d}return c}if(az.last_lit){D(az,!1);if(az.strm.avail_out===0){return e}}return b}function n(aw,av){var au;for(;;){if(aw.lookahead===0){B(aw);if(aw.lookahead===0){if(av===al){return e}break}}aw.match_length=0;au=_trees._tr_tally(aw,0,aw.window[aw.strstart]);aw.lookahead--;aw.strstart++;if(au){D(aw,!1);if(aw.strm.avail_out===0){return e}}}aw.insert=0;if(av===ah){D(aw,!0);if(aw.strm.avail_out===0){return d}return c}if(aw.last_lit){D(aw,!1);if(aw.strm.avail_out===0){return e}}return b}function h(av,ax,ay,aw,au){this.good_length=av;this.max_lazy=ax;this.nice_length=ay;this.max_chain=aw;this.func=au}var i;i=[new h(0,0,0,0,q),new h(4,4,8,4,m),new h(4,5,16,8,m),new h(4,6,32,32,m),new h(4,4,16,16,p),new h(8,16,32,32,p),new h(8,16,128,128,p),new h(8,32,128,256,p),new h(32,128,258,1024,p),new h(32,258,258,4096,p)];function L(au){au.window_size=2*au.w_size;at(au.head);au.max_lazy_match=i[au.level].max_lazy;au.good_match=i[au.level].good_length;au.nice_match=i[au.level].nice_length;au.max_chain_length=i[au.level].max_chain;au.strstart=0;au.block_start=0;au.lookahead=0;au.insert=0;au.match_length=au.prev_length=R-1;au.match_available=0;au.ins_h=0}function y(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=af;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new Uint16Array(G<<1);this.dyn_dtree=new Uint16Array((2*j+1)<<1);this.bl_tree=new Uint16Array((2*a+1)<<1);at(this.dyn_ltree);at(this.dyn_dtree);at(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new Uint16Array(M+1);this.heap=new Uint16Array(2*I+1);at(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new Uint16Array(2*I+1);at(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function v(av){var au;if(!av||!av.state){return z(av,aq)}av.total_in=av.total_out=0;av.data_type=ar;au=av.state;au.pending=0;au.pending_out=0;if(au.wrap<0){au.wrap=-au.wrap}au.status=(au.wrap?H:f);av.adler=(au.wrap===2)?0:1;au.last_flush=al;ezlib.trees._tr_init(au);return am}function u(av){var au=v(av);if(au===am){L(av.state)}return au}function x(av,au){if(!av||!av.state){return aq}if(av.state.wrap!==2){return aq}av.state.gzhead=au;return am}function t(az,au,aw,aA,av,ay){if(!az){return aq}var aB=1;if(au===ad){au=6}if(aA<0){aB=0;aA=-aA}else{if(aA>15){aB=2;aA-=16}}if(av<1||av>O||aw!==af||aA<8||aA>15||au<0||au>9||ay<0||ay>ai){return z(az,aq)}if(aA===8){aA=9}var ax=new y();az.state=ax;ax.strm=az;ax.wrap=aB;ax.gzhead=null;ax.w_bits=aA;ax.w_size=1<<ax.w_bits;ax.w_mask=ax.w_size-1;ax.hash_bits=av+7;ax.hash_size=1<<ax.hash_bits;ax.hash_mask=ax.hash_size-1;ax.hash_shift=~~((ax.hash_bits+R-1)/R);ax.window=new Uint8Array(ax.w_size<<1);ax.head=new Uint16Array(ax.hash_size);ax.prev=new Uint16Array(ax.w_size);ax.lit_bufsize=1<<(av+6);ax.pending_buf_size=ax.lit_bufsize<<2;ax.pending_buf=new Uint8Array(ax.pending_buf_size);ax.d_buf=ax.lit_bufsize;ax.l_buf=3*ax.lit_bufsize;ax.level=au;ax.strategy=ay;ax.method=aw;return u(az)}function s(av,au){return t(av,au,af,P,k,ae)}function l(aB,aw){var az,aA;var au,aD;if(!aB||!aB.state||aw>aa||aw<0){return aB?z(aB,aq):aq}aA=aB.state;if(!aB.output||(!aB.input&&aB.avail_in!==0)||(aA.status===C&&aw!==ah)){return z(aB,(aB.avail_out===0)?ab:aq)}aA.strm=aB;az=aA.last_flush;aA.last_flush=aw;if(aA.status===H){if(aA.wrap===2){aB.adler=0;V(aA,31);V(aA,139);V(aA,8);if(!aA.gzhead){V(aA,0);V(aA,0);V(aA,0);V(aA,0);V(aA,0);V(aA,aA.level===9?2:(aA.strategy>=ak||aA.level<2?4:0));V(aA,T);aA.status=f}else{V(aA,(aA.gzhead.text?1:0)+(aA.gzhead.hcrc?2:0)+(!aA.gzhead.extra?0:4)+(!aA.gzhead.name?0:8)+(!aA.gzhead.comment?0:16));var aC=Math.round(aA.gzhead.time.getTime()*0.001);V(aA,aC&255);V(aA,aC>>8&255);V(aA,aC>>16&255);V(aA,aC>>24&255);V(aA,aA.level===9?2:(aA.strategy>=ak||aA.level<2?4:0));V(aA,aA.gzhead.os&255);if(aA.gzhead.extra&&aA.gzhead.extra.length){V(aA,aA.gzhead.extra.length&255);V(aA,(aA.gzhead.extra.length>>8)&255)}if(aA.gzhead.hcrc){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending,0)}aA.gzindex=0;aA.status=A}}else{var ax=(af+((aA.w_bits-8)<<4))<<8;var ay=-1;if(aA.strategy>=ak||aA.level<2){ay=0}else{if(aA.level<6){ay=1}else{if(aA.level===6){ay=2}else{ay=3}}}ax|=(ay<<6);if(aA.strstart!==0){ax|=U}ax+=31-(ax%31);aA.status=f;W(aA,ax);if(aA.strstart!==0){W(aA,aB.adler>>>16);W(aA,aB.adler&65535)}aB.adler=1}}if(aA.status===A){if(aA.gzhead.extra){au=aA.pending;while(aA.gzindex<(aA.gzhead.extra.length&65535)){if(aA.pending===aA.pending_buf_size){if(aA.gzhead.hcrc&&aA.pending>au){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending-au,au)}E(aB);au=aA.pending;if(aA.pending===aA.pending_buf_size){break}}V(aA,aA.gzhead.extra[aA.gzindex]&255);aA.gzindex++}if(aA.gzhead.hcrc&&aA.pending>au){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending-au,au)}if(aA.gzindex===aA.gzhead.extra.length){aA.gzindex=0;aA.status=S}}else{aA.status=S}}if(aA.status===S){if(aA.gzhead.name){au=aA.pending;do{if(aA.pending===aA.pending_buf_size){if(aA.gzhead.hcrc&&aA.pending>au){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending-au,au)}E(aB);au=aA.pending;if(aA.pending===aA.pending_buf_size){aD=1;break}}if(aA.gzindex<aA.gzhead.name.length){aD=aA.gzhead.name.charCodeAt(aA.gzindex++)&255}else{aD=0}V(aA,aD)}while(aD!==0);if(aA.gzhead.hcrc&&aA.pending>au){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending-au,au)}if(aD===0){aA.gzindex=0;aA.status=g}}else{aA.status=g}}if(aA.status===g){if(aA.gzhead.comment){au=aA.pending;do{if(aA.pending===aA.pending_buf_size){if(aA.gzhead.hcrc&&aA.pending>au){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending-au,au)}E(aB);au=aA.pending;if(aA.pending===aA.pending_buf_size){aD=1;break}}if(aA.gzindex<aA.gzhead.comment.length){aD=aA.gzhead.comment.charCodeAt(aA.gzindex++)&255}else{aD=0}V(aA,aD)}while(aD!==0);if(aA.gzhead.hcrc&&aA.pending>au){aB.adler=crc32(aB.adler,aA.pending_buf,aA.pending-au,au)}if(aD===0){aA.status=F}}else{aA.status=F}}if(aA.status===F){if(aA.gzhead.hcrc){if(aA.pending+2>aA.pending_buf_size){E(aB)}if(aA.pending+2<=aA.pending_buf_size){V(aA,aB.adler&255);V(aA,(aB.adler>>8)&255);aB.adler=0;aA.status=f}}else{aA.status=f}}if(aA.pending!==0){E(aB);if(aB.avail_out===0){aA.last_flush=-1;return am}}else{if(aB.avail_in===0&&X(aw)<=X(az)&&aw!==ah){return z(aB,ab)}}if(aA.status===C&&aB.avail_in!==0){return z(aB,ab)}if(aB.avail_in!==0||aA.lookahead!==0||(aw!==al&&aA.status!==C)){var av=(aA.strategy===ak)?n(aA,aw):(aA.strategy===ao?o(aA,aw):i[aA.level].func(aA,aw));if(av===d||av===c){aA.status=C}if(av===e||av===d){if(aB.avail_out===0){aA.last_flush=-1}return am}if(av===b){if(aw===an){ezlib.trees._tr_align(aA)}else{if(aw!==aa){ezlib.trees._tr_stored_block(aA,0,0,!1);if(aw===aj){at(aA.head);if(aA.lookahead===0){aA.strstart=0;aA.block_start=0;aA.insert=0}}}}E(aB);if(aB.avail_out===0){aA.last_flush=-1;return am}}}if(aw!==ah){return am}if(aA.wrap<=0){return ap}if(aA.wrap===2){V(aA,aB.adler&255);V(aA,(aB.adler>>8)&255);V(aA,(aB.adler>>16)&255);V(aA,(aB.adler>>24)&255);V(aA,aB.total_in&255);V(aA,(aB.total_in>>8)&255);V(aA,(aB.total_in>>16)&255);V(aA,(aB.total_in>>24)&255)}else{W(aA,aB.adler>>>16);W(aA,aB.adler&65535)}E(aB);if(aA.wrap>0){aA.wrap=-aA.wrap}return aA.pending!==0?am:ap}function r(av){var au;if(!av||!av.state){return aq}au=av.state.status;if(au!==H&&au!==A&&au!==S&&au!==g&&au!==F&&au!==f&&au!==C){return z(av,aq)}av.state=null;return au===f?z(av,ac):am}function w(aC,av){var aw=av.length;var aA;var aB,ay;var aE;var au;var az;var ax;var aD;if(!aC||!aC.state){return aq}aA=aC.state;aE=aA.wrap;if(aE===2||(aE===1&&aA.status!==H)||aA.lookahead){return aq}if(aE===1){aC.adler=ezlib.adler32(aC.adler,av,aw,0)}aA.wrap=0;if(aw>=aA.w_size){if(aE===0){at(aA.head);aA.strstart=0;aA.block_start=0;aA.insert=0}aD=new Uint8Array(aA.w_size);ezlib.utils.arraySet(aD,av,aw-aA.w_size,aA.w_size,0);av=aD;aw=aA.w_size}au=aC.avail_in;az=aC.next_in;ax=aC.input;aC.avail_in=aw;aC.next_in=0;aC.input=av;B(aA);while(aA.lookahead>=R){aB=aA.strstart;ay=aA.lookahead-(R-1);do{aA.ins_h=((aA.ins_h<<aA.hash_shift)^aA.window[aB+R-1])&aA.hash_mask;aA.prev[aB&aA.w_mask]=aA.head[aA.ins_h];aA.head[aA.ins_h]=aB;aB++}while(--ay);aA.strstart=aB;aA.lookahead=R-1;B(aA)}aA.strstart+=aA.lookahead;aA.block_start=aA.strstart;aA.insert=aA.lookahead;aA.lookahead=0;aA.match_length=aA.prev_length=R-1;aA.match_available=0;aC.next_in=az;aC.input=ax;aC.avail_in=au;aA.wrap=aE;return am}return{deflateInit:s,deflateInit2:t,deflateReset:u,deflateResetKeep:v,deflateSetHeader:x,deflate:l,deflateEnd:r,deflateSetDictionary:w,deflateInfo:"ezlib (modified pako deflate)"}})();ezlib.GZheader=function(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=0;this.name="";this.comment="";this.hcrc=0;this.done=!1};ezlib.trees=ezlib.trees||(function(){var ak=4;var aj=0;var al=1;var am=2;function an(ao){var ap=ao.length;while(--ap>=0){ao[ap]=0}}var ag=0;var ae=1;var x=2;var M=3;var L=258;var H=29;var I=256;var G=I+1+H;var u=30;var m=19;var E=2*G+1;var J=15;var o=16;var K=7;var y=256;var P=16;var R=17;var Q=18;var B=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var n=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var w=512;var ad=new Array((G+2)<<1);an(ad);var aa=new Array(u<<1);an(aa);var a=new Array(w);an(a);var b=new Array(L-M+1);an(b);var i=new Array(H);an(i);var h=new Array(u);an(h);function af(at,aq,ap,ao,ar){this.static_tree=at;this.extra_bits=aq;this.extra_base=ap;this.elems=ao;this.max_length=ar;this.has_stree=at&&at.length}var ac;var Z;var Y;function ai(ao,ap){this.dyn_tree=ao;this.max_code=0;this.stat_desc=ap}function t(ao){return ao<256?a[ao]:a[256+(ao>>>7)]}function O(ao,ap){ao.pending_buf[ao.pending++]=(ap)&255;ao.pending_buf[ao.pending++]=(ap>>>8)&255}function U(ap,aq,ao){if(ap.bi_valid>(o-ao)){ap.bi_buf|=(aq<<ap.bi_valid)&65535;O(ap,ap.bi_buf);ap.bi_buf=aq>>(o-ap.bi_valid);ap.bi_valid+=ao-o}else{ap.bi_buf|=(aq<<ap.bi_valid)&65535;ap.bi_valid+=ao}}function V(ap,ao,aq){U(ap,aq[ao*2],aq[ao*2+1])}function k(ao,ap){var aq=0;do{aq|=ao&1;ao>>>=1;aq<<=1}while(--ap>0);return aq>>>1}function j(ao){if(ao.bi_valid===16){O(ao,ao.bi_buf);ao.bi_buf=0;ao.bi_valid=0}else{if(ao.bi_valid>=8){ao.pending_buf[ao.pending++]=ao.bi_buf&255;ao.bi_buf>>=8;ao.bi_valid-=8}}}function C(aB,aq){var aD=aq.dyn_tree;var ax=aq.max_code;var aC=aq.stat_desc.static_tree;var av=aq.stat_desc.has_stree;var ar=aq.stat_desc.extra_bits;var ao=aq.stat_desc.extra_base;var ay=aq.stat_desc.max_length;var au;var az,aw;var ap;var aE;var at;var aA=0;for(ap=0;ap<=J;ap++){aB.bl_count[ap]=0}aD[aB.heap[aB.heap_max]*2+1]=0;for(au=aB.heap_max+1;au<E;au++){az=aB.heap[au];ap=aD[aD[az*2+1]*2+1]+1;if(ap>ay){ap=ay;aA++}aD[az*2+1]=ap;if(az>ax){continue}aB.bl_count[ap]++;aE=0;if(az>=ao){aE=ar[az-ao]}at=aD[az*2];aB.opt_len+=at*(ap+aE);if(av){aB.static_len+=at*(aC[az*2+1]+aE)}}if(aA===0){return}do{ap=ay-1;while(aB.bl_count[ap]===0){ap--}aB.bl_count[ap]--;aB.bl_count[ap+1]+=2;aB.bl_count[ay]--;aA-=2}while(aA>0);for(ap=ay;ap!==0;ap--){az=aB.bl_count[ap];while(az!==0){aw=aB.heap[--au];if(aw>ax){continue}if(aD[aw*2+1]!==ap){aB.opt_len+=(ap-aD[aw*2+1])*aD[aw*2];aD[aw*2+1]=ap}az--}}}function D(aw,at,ap){var av=new Array(J+1);var aq=0;var ao;var au;for(ao=1;ao<=J;ao++){av[ao]=aq=(aq+ap[ao-1])<<1}for(au=0;au<=at;au++){var ar=aw[au*2+1];if(ar===0){continue}aw[au*2]=k(av[ar]++,ar)}}function ah(){var au;var ao;var at;var aq;var ar;var ap=new Array(J+1);at=0;for(aq=0;aq<H-1;aq++){i[aq]=at;for(au=0;au<(1<<B[aq]);au++){b[at++]=aq}}b[at-1]=aq;ar=0;for(aq=0;aq<16;aq++){h[aq]=ar;for(au=0;au<(1<<A[aq]);au++){a[ar++]=aq}}ar>>=7;for(;aq<u;aq++){h[aq]=ar<<7;for(au=0;au<(1<<(A[aq]-7));au++){a[256+ar++]=aq}}for(ao=0;ao<=J;ao++){ap[ao]=0}au=0;while(au<=143){ad[au*2+1]=8;au++;ap[8]++}while(au<=255){ad[au*2+1]=9;au++;ap[9]++}while(au<=279){ad[au*2+1]=7;au++;ap[7]++}while(au<=287){ad[au*2+1]=8;au++;ap[8]++}D(ad,G+1,ap);for(au=0;au<u;au++){aa[au*2+1]=5;aa[au*2]=k(au,5)}ac=new af(ad,B,I+1,G,J);Z=new af(aa,A,0,u,J);Y=new af(new Array(0),z,0,m,K)}function F(ap){var ao;for(ao=0;ao<G;ao++){ap.dyn_ltree[ao*2]=0}for(ao=0;ao<u;ao++){ap.dyn_dtree[ao*2]=0}for(ao=0;ao<m;ao++){ap.bl_tree[ao*2]=0}ap.dyn_ltree[y*2]=1;ap.opt_len=ap.static_len=0;ap.last_lit=ap.matches=0}function l(ao){if(ao.bi_valid>8){O(ao,ao.bi_buf)}else{if(ao.bi_valid>0){ao.pending_buf[ao.pending++]=ao.bi_buf}}ao.bi_buf=0;ao.bi_valid=0}function s(ar,ao,aq,ap){l(ar);if(ap){O(ar,aq);O(ar,~aq)}ezlib.utils.arraySet(ar.pending_buf,ar.window,ao,aq,ar.pending);ar.pending+=aq}function X(au,at,ar,aq){var ap=at*2;var ao=ar*2;return(au[ap]<au[ao]||(au[ap]===au[ao]&&aq[at]<=aq[ar]))}function N(aq,ar,ap){var at=aq.heap[ap];var ao=ap<<1;while(ao<=aq.heap_len){if(ao<aq.heap_len&&X(ar,aq.heap[ao+1],aq.heap[ao],aq.depth)){ao++}if(X(ar,at,aq.heap[ao],aq.depth)){break}aq.heap[ap]=aq.heap[ao];ap=ao;ao<<=1}aq.heap[ap]=at}function r(aw,au,aq){var ap;var at;var av=0;var ao;var ar;if(aw.last_lit!==0){do{ap=(aw.pending_buf[aw.d_buf+av*2]<<8)|(aw.pending_buf[aw.d_buf+av*2+1]);at=aw.pending_buf[aw.l_buf+av];av++;if(ap===0){V(aw,at,au)}else{ao=b[at];V(aw,ao+I+1,au);ar=B[ao];if(ar!==0){at-=i[ao];U(aw,at,ar)}ap--;ao=t(ap);V(aw,ao,aq);ar=A[ao];if(ar!==0){ap-=h[ao];U(aw,ap,ar)}}}while(av<aw.last_lit)}V(aw,y,au)}function q(aw,ao){var ay=ao.dyn_tree;var ax=ao.stat_desc.static_tree;var aq=ao.stat_desc.has_stree;var ap=ao.stat_desc.elems;var au,ar;var at=-1;var av;aw.heap_len=0;aw.heap_max=E;for(au=0;au<ap;au++){if(ay[au*2]!==0){aw.heap[++aw.heap_len]=at=au;aw.depth[au]=0}else{ay[au*2+1]=0}}while(aw.heap_len<2){av=aw.heap[++aw.heap_len]=(at<2?++at:0);ay[av*2]=1;aw.depth[av]=0;aw.opt_len--;if(aq){aw.static_len-=ax[av*2+1]}}ao.max_code=at;for(au=(aw.heap_len>>1);au>=1;au--){N(aw,ay,au)}av=ap;do{au=aw.heap[1];aw.heap[1]=aw.heap[aw.heap_len--];N(aw,ay,1);ar=aw.heap[1];aw.heap[--aw.heap_max]=au;aw.heap[--aw.heap_max]=ar;ay[av*2]=ay[au*2]+ay[ar*2];aw.depth[av]=(aw.depth[au]>=aw.depth[ar]?aw.depth[au]:aw.depth[ar])+1;ay[au*2+1]=ay[ar*2+1]=av;aw.heap[1]=av++;N(aw,ay,1)}while(aw.heap_len>=2);aw.heap[--aw.heap_max]=aw.heap[1];C(aw,ao);D(ay,at,aw.bl_count)}function S(ax,ay,aq){var au;var aw=-1;var ap;var av=ay[1];var ao=0;var ar=7;var at=4;if(av===0){ar=138;at=3}ay[(aq+1)*2+1]=65535;for(au=0;au<=aq;au++){ap=av;av=ay[(au+1)*2+1];if(++ao<ar&&ap===av){continue}else{if(ao<at){ax.bl_tree[ap*2]+=ao}else{if(ap!==0){if(ap!==aw){ax.bl_tree[ap*2]++}ax.bl_tree[P*2]++}else{if(ao<=10){ax.bl_tree[R*2]++}else{ax.bl_tree[Q*2]++}}}}ao=0;aw=ap;if(av===0){ar=138;at=3}else{if(ap===av){ar=6;at=3}else{ar=7;at=4}}}}function W(ax,ay,aq){var au;var aw=-1;var ap;var av=ay[1];var ao=0;var ar=7;var at=4;if(av===0){ar=138;at=3}for(au=0;au<=aq;au++){ap=av;av=ay[(au+1)*2+1];if(++ao<ar&&ap===av){continue}else{if(ao<at){do{V(ax,ap,ax.bl_tree)}while(--ao!==0)}else{if(ap!==0){if(ap!==aw){V(ax,ap,ax.bl_tree);ao--}V(ax,P,ax.bl_tree);U(ax,ao-3,2)}else{if(ao<=10){V(ax,R,ax.bl_tree);U(ax,ao-3,3)}else{V(ax,Q,ax.bl_tree);U(ax,ao-11,7)}}}}ao=0;aw=ap;if(av===0){ar=138;at=3}else{if(ap===av){ar=6;at=3}else{ar=7;at=4}}}}function p(ap){var ao;S(ap,ap.dyn_ltree,ap.l_desc.max_code);S(ap,ap.dyn_dtree,ap.d_desc.max_code);q(ap,ap.bl_desc);for(ao=m-1;ao>=3;ao--){if(ap.bl_tree[n[ao]*2+1]!==0){break}}ap.opt_len+=3*(ao+1)+5+5+4;return ao}function T(at,aq,ap,ao){var ar;U(at,aq-257,5);U(at,ap-1,5);U(at,ao-4,4);for(ar=0;ar<ao;ar++){U(at,at.bl_tree[n[ar]*2+1],3)}W(at,at.dyn_ltree,aq-1);W(at,at.dyn_dtree,ap-1)}function v(aq){var ao=4093624447;var ap;for(ap=0;ap<=31;ap++,ao>>>=1){if((ao&1)&&(aq.dyn_ltree[ap*2]!==0)){return aj}}if(aq.dyn_ltree[9*2]!==0||aq.dyn_ltree[10*2]!==0||aq.dyn_ltree[13*2]!==0){return al}for(ap=32;ap<I;ap++){if(aq.dyn_ltree[ap*2]!==0){return al}}return aj}var ab=!1;function e(ao){if(!ab){ah();ab=!0}ao.l_desc=new ai(ao.dyn_ltree,ac);ao.d_desc=new ai(ao.dyn_dtree,Z);ao.bl_desc=new ai(ao.bl_tree,Y);ao.bi_buf=0;ao.bi_valid=0;F(ao)}function f(aq,ao,ar,ap){U(aq,(ag<<1)+(ap?1:0),3);s(aq,ao,ar,!0)}function c(ao){U(ao,ae<<1,3);V(ao,y,ad);j(ao)}function d(at,ao,av,ap){var ar,au;var aq=0;if(at.level>0){if(at.strm.data_type===am){at.strm.data_type=v(at)}q(at,at.l_desc);q(at,at.d_desc);aq=p(at);ar=(at.opt_len+3+7)>>>3;au=(at.static_len+3+7)>>>3;if(au<=ar){ar=au}}else{ar=au=av+5}if((av+4<=ar)&&(ao!==-1)){f(at,ao,av,ap)}else{if(at.strategy===ak||au===ar){U(at,(ae<<1)+(ap?1:0),3);r(at,ad,aa)}else{U(at,(x<<1)+(ap?1:0),3);T(at,at.l_desc.max_code+1,at.d_desc.max_code+1,aq+1);r(at,at.dyn_ltree,at.dyn_dtree)}}F(at);if(ap){l(at)}}function g(aq,ao,ap){aq.pending_buf[(aq.d_buf+(aq.last_lit<<1))]=(ao>>>8)&255;aq.pending_buf[(aq.d_buf+(aq.last_lit<<1)+1)]=ao&255;aq.pending_buf[aq.l_buf+aq.last_lit]=ap&255;aq.last_lit++;if(ao===0){aq.dyn_ltree[ap<<1]++}else{aq.matches++;ao--;aq.dyn_ltree[(b[ap]+I+1)<<1]++;aq.dyn_dtree[t(ao)<<1]++}return aq.last_lit===aq.lit_bufsize-1}return{_tr_init:e,_tr_stored_block:f,_tr_flush_block:d,_tr_tally:g,_tr_align:c}})();ezlib.ZStream=function(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0};